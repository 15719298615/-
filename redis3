持久化选项：
redis提供了两种个不同的持久化方式来使数据存储到硬盘中。
一种方法叫快照，他可以将存在于某一刻的所有数据都写入硬盘里面。

另一种叫做只追加文件（append-only-file，aof），他会在执行写命令时，将被执行的写命令复制到硬盘里面。

这两种方法即可以同时使用又可以单独使用，在某些情况下甚至可以两种都不使用。
将内存中的数据存储到硬盘的一个主要原因是位了在之后重用数据，或是为了防止系统发生故障而将数据备份到一个远程位置。


持久化快照（RDB）：
缺点：在快照之间如果出现系统故障，或者系统崩溃，那么redis将丢失更新的数据。
创建快照的方式：
1.客户端可以通过向redis发送bgsave命令来创建快照。对于支持bgsave的平台来说（基本上所有平台都支持，除了windows平台），redis会调用fork来创建一个子进程，然后子进程负责将快照写入硬盘，而父进程则继续处理命令。
2.客户端还可以通过向redis发送save命令来创建一个快照，接到save命令的redis服务器在快照创建完成之前不在响应任何其他命令。save命令不常用，我们通常会在没有足够的内存去执行bgsave命令的情况下，又或者即使等待持久化操作完毕也无所谓的情况下，才会使用这个命令。
3.如果用户设置了save配置选项，比如：save  60  10000，那么从最近一次创建快照开始算起，当“60秒之内有10000次写入”这个条件被满足时，Redis就会自动出发bgsave命令。如果用户设置了多个save配置，那么当任意一个sava配置选项锁设置的条件被满足时，redis就会触发一次bgsave命令。
4.当redis通过shutdown命令接收到关闭服务器的请求时，或者接收到term信号时，会执行一个save命令，阻塞所有客户端，不在执行客户端发送的任何命令，并在save命令执行完毕之后关闭服务器。
5.当一个redis服务器连接另一个redis服务器，并向对方发送sync命令来开始一次复制操作时，如果主服务器目前没有在执行bgsave操作，或者主服务器并非刚刚执行完bgsave操作，那么主服务器就会执行bgsave命令。
